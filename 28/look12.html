<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Co√ªt installation panneaux solaires | Eure-et-Loir (28)</title>

<style>
  :root{
    /* Layout */
    --hero-h-desktop: 95vh;
    --hero-h-mobile: 100svh;
    --hero-min: 700px;
    --maxw: 1100px;

    /* Palette (sobre) */
    --accent:#f59e0b;         /* orange marque */
    --accent-2:#f7b733;
    --ink:#0f172a;
    --muted:#64748b;
    --border:#e6e8ef;
    --ok:#16a34a;
    --card:#ffffff;
    --surface:#f9fafb;
  }

  /* Reset & base */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font:16px/1.45 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
    color:var(--ink); background:var(--surface);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    font-variant-numeric:tabular-nums;
  }

  /* ================== HERO ================== */
  header.hero{
    position:relative; height:var(--hero-h-desktop); min-height:var(--hero-min);
    overflow:hidden; isolation:isolate;
  }
  header.hero::before{
    content:""; position:absolute; inset:0;
    background:
      linear-gradient(90deg,
        rgba(5,12,24,.82) 0%,
        rgba(7,16,30,.66) 34%,
        rgba(10,18,28,.42) 62%,
        rgba(12,20,28,.22) 100%),
      url("https://raw.githubusercontent.com/BiofranceEnergies/biofrance-images/1ea92369de57361354807811188559129b45985c/foto%20fond.webp")
      center 35%/cover no-repeat;
    z-index:-1;
  }
  .hero__inner{
    max-width:var(--maxw); margin:0 auto;
    padding:60px clamp(16px,4vw,40px);
    display:grid; grid-template-columns:1.1fr 0.9fr; gap:clamp(20px,4vw,42px);
    height:100%; align-items:center; color:#fff;
  }
  @media (max-width:860px){
    .hero__inner{grid-template-columns:1fr;text-align:center;align-items:flex-end;padding-bottom:80px;}
  }
  .title{margin:0 0 14px;font-weight:900;line-height:1.1;font-size:clamp(28px,4.4vw,52px);color:#fff}
  .title em{color:var(--accent);font-style:normal;text-shadow:0 2px 10px rgba(245,158,11,.3);}
  .lead{margin:8px 0 0;color:rgba(255,255,255,.9);max-width:54ch;}

  .panel{display:flex;flex-direction:column;gap:12px;width:100%;}
  .pill{
    display:flex;align-items:center;justify-content:center;min-height:46px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:#1b1202;font-weight:800;border-radius:10px;border:0;
    box-shadow:0 8px 22px rgba(245,158,11,.25);
    transition:transform .2s ease, box-shadow .2s ease;
  }
  .pill:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(245,158,11,.32);}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .rect,.option{
    display:flex;align-items:center;padding:12px 14px;
    background:rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.22); border-radius:10px;
  }
  input{width:100%;background:transparent;border:0;color:#fff;font:inherit;min-width:0}
  input::placeholder{color:#cbd5e1;opacity:1;font-size:15px}
  .cta{
    display:inline-flex;align-items:center;justify-content:center;gap:8px;
    min-height:48px;width:100%;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:#fff;font-weight:900;border:0;border-radius:10px;cursor:pointer;
    box-shadow:0 8px 22px rgba(245,158,11,.25);transition:transform .2s,box-shadow .2s;
  }
  .cta:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(245,158,11,.32);}

  /* ================== SECTION 3 √âTAPES ================== */
  .steps-2025{background:#fff;padding:clamp(40px,7vw,80px) 16px;color:var(--ink);}
  .steps-2025__inner{max-width:var(--maxw);margin:0 auto;text-align:center;}
  .steps-2025__title{font-weight:800;font-size:clamp(26px,3.8vw,44px);margin-bottom:6px;}
  .steps-2025__subtitle{color:var(--muted);margin-bottom:clamp(28px,5vw,48px);}
  .steps-2025__grid{display:grid;gap:clamp(14px,2vw,20px);grid-template-columns:1fr;}
  @media(min-width:860px){.steps-2025__grid{grid-template-columns:repeat(3,1fr);}}
  .steps-2025__item{
    background:#fff;border:1px solid var(--border);border-radius:16px;
    padding:clamp(18px,2.2vw,24px);
    box-shadow:0 4px 14px rgba(15,23,42,.05);
    display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;
  }
  .steps-2025__num{
    width:72px;height:72px;border-radius:50%;display:grid;place-items:center;
    font-weight:800;color:#fff;background:linear-gradient(135deg,var(--accent),#fdba74);
    box-shadow:0 8px 22px rgba(245,158,11,.25);font-size:22px;margin-bottom:12px;
  }
  .steps-2025__heading{margin:0;font-weight:800;font-size:clamp(18px,2.2vw,22px);}
  .steps-2025__text{margin:6px 0 0;color:var(--muted);font-size:clamp(14px,1.6vw,16px);}

  .steps-2025__note{margin:clamp(40px,6vw,60px) 0 0;display:flex;flex-direction:column;align-items:center;gap:18px;}
  .steps-2025__note p{font-weight:700;color:var(--ink);font-size:clamp(16px,2vw,20px);}

  /* ================== CHIFFRES CL√âS ================== */
  .stats-bg{
    width:100vw;margin-left:calc(50% - 50vw);margin-top:clamp(72px,9vw,140px);
    position:relative;padding:clamp(48px,9vw,96px) 16px;color:#fff;overflow:hidden;isolation:isolate;
  }
  .stats-bg::before{
    content:"";position:absolute;inset:0;
    background:url("https://raw.githubusercontent.com/BiofranceEnergies/biofrance-images/687b0f048a98e03f86e7852020887ff4f05eb913/bande%20panneaux%20full%20black.webp") center/cover no-repeat;
    filter:brightness(1.02) saturate(.95);z-index:-1;
  }
  .stats-bg__inner{max-width:var(--maxw);margin:0 auto;display:grid;grid-template-columns:1fr;gap:clamp(14px,3vw,20px);text-align:center;}
  @media (min-width:820px){.stats-bg__inner{grid-template-columns:repeat(4,1fr);}}
  .stat{padding:clamp(10px,2vw,14px);}
  .stat__value{font-weight:900;letter-spacing:-.02em;font-size:clamp(34px,5.5vw,56px);line-height:1.05;color:var(--accent);text-shadow:0 2px 10px rgba(0,0,0,.25);}
  .stat__label{margin-top:4px;font-size:clamp(14px,1.7vw,16px);color:rgba(255,255,255,.92);text-shadow:0 1px 4px rgba(0,0,0,.25);}

  .sr-only{position:absolute !important;width:1px;height:1px;margin:-1px;padding:0;border:0;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);}

  /* ================== AVIS CLIENTS ================== */
  .testi{background:#fff;color:var(--ink);margin-top:clamp(40px,6vw,80px);padding:clamp(28px,6vw,60px) 16px;}
  .testi__inner{max-width:var(--maxw);margin:0 auto;}
  .testi__head{text-align:center;margin-bottom:clamp(18px,3vw,28px);}
  .testi__title{font-weight:900;line-height:1.15;font-size:clamp(26px,3.6vw,40px);margin:0 0 8px;}
  .testi__meta{color:var(--muted);font-size:clamp(14px,1.8vw,16px);}
  .testi__grid{display:grid;gap:clamp(16px,2.6vw,22px);grid-template-columns:1fr;}
  @media (min-width:1024px){.testi__grid{grid-template-columns:repeat(3,1fr);}}
  .tcard{
    background:#fff;border:1px solid var(--border);border-radius:16px;
    padding:clamp(16px,2.2vw,22px); box-shadow:0 4px 14px rgba(15,23,42,.05);
    display:flex;flex-direction:column;gap:12px;
  }
  .tcard__top{display:flex;align-items:center;gap:12px;}
  .avatar{
    width:44px;height:44px;border-radius:999px;display:grid;place-items:center;
    font-weight:700;color:#111827;background:linear-gradient(180deg,#fff6e5,#ffe4bf);
    border:1px solid #f1c987;
  }
  .tcard__name{font-weight:800;}
  .tcard__loc{color:var(--muted);font-size:14px;margin-top:2px;}
  .stars{display:flex;gap:2px;}
  .stars svg{width:18px;height:18px}
  .tcard__text{color:#334155;font-style:italic}

  /* ================== POURQUOI LE SOLAIRE ================== */
  .why{background:#f7f9fc;color:var(--ink);padding:clamp(40px,7vw,90px) 16px;margin-top:clamp(40px,6vw,80px);}
  .why__inner{max-width:var(--maxw);margin:0 auto;}
  .why__head{text-align:center;margin-bottom:clamp(22px,4vw,34px);}
  .why__title{font-weight:900;line-height:1.1;font-size:clamp(28px,4vw,48px);margin:0 0 10px;}
  .why__subtitle{color:var(--muted);font-size:clamp(14px,1.9vw,18px);}
  .why__grid{display:grid;gap:clamp(14px,2.4vw,20px);grid-template-columns:1fr;}
  @media (min-width:860px){ .why__grid{grid-template-columns:repeat(2,1fr);} }
  @media (min-width:1180px){ .why__grid{grid-template-columns:repeat(4,1fr);} }
  .why__card{
    background:#fff;border:1px solid var(--border);border-radius:16px;
    padding:clamp(18px,2.2vw,24px); box-shadow:0 4px 14px rgba(15,23,42,.05);
  }
  .why__top{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
  .why__icon{
    width:42px;height:42px;border-radius:12px;display:grid;place-items:center;flex:0 0 auto;
    background:linear-gradient(180deg,#fff3db,#ffe1b3); border:1px solid #f4c981;color:#b45309;
  }
  .why__heading{font-weight:800;font-size:clamp(16px,2vw,20px);margin:0;}
  .why__text{color:var(--muted);margin:6px 0 0;font-size:clamp(14px,1.7vw,16px);line-height:1.45;}

  /* ================== FAQ ================== */
  .faq{background:#f7f9fc;color:var(--ink);margin-top:clamp(56px,8vw,96px);padding:clamp(32px,7vw,80px) 16px;}
  .faq__inner{max-width:var(--maxw);margin:0 auto;}
  .faq__head{text-align:center;margin-bottom:clamp(18px,3.6vw,28px);}
  .faq__title{font-weight:900;font-size:clamp(28px,4vw,48px);margin:0 0 8px;line-height:1.1;}
  .faq__subtitle{color:var(--muted);font-size:clamp(14px,1.9vw,18px);}
  .faq__list{display:grid;gap:12px;}
  .faq details{background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(15,23,42,.05);overflow:hidden;}
  .faq summary{list-style:none;cursor:pointer;display:flex;align-items:center;gap:10px;padding:18px 20px;font-weight:800;font-size:clamp(15px,1.9vw,17px);color:var(--ink);transition:color .2s ease;}
  .faq summary:hover, details[open] summary{color:var(--accent);}
  .faq summary::-webkit-details-marker{display:none;}
  .faq__chev{margin-left:auto;transition:transform .2s ease;flex:0 0 auto;opacity:.7;}
  details[open] .faq__chev{transform:rotate(180deg);opacity:1;}
  .faq__panel{padding:0 20px 18px 20px;color:var(--muted);font-size:clamp(14px,1.8vw,16px);line-height:1.55;border-top:1px solid var(--border);background:#fbfbfd;}
  .faq{padding-top:clamp(20px,4vw,40px);}
  .faq h2{margin-bottom:clamp(10px,2vw,16px);}
  .faq__list{margin-top:6px;}

  /* Logos certifications (h√©ros) */
  .certifs{position:absolute;top:18px;left:18px;display:flex;align-items:center;gap:12px;z-index:5;}
  .certifs__img{height:36px;width:auto;display:block;filter:drop-shadow(0 1px 3px rgba(0,0,0,.25));}
  .certifs__img--main{height:76px;margin:0 3px;}
  .certifs__img[src*="qualipv"]{height:44px;}
  .certifs__img[src*="RGE.webp"]{height:32px;}
  @media (max-width:860px){
    .certifs{top:12px;left:12px;gap:8px;}
    .certifs__img{height:28px;}
    .certifs__img--main{height:52px;}
    .certifs__img[src*="qualipv"]{height:34px;}
    .certifs__img[src*="RGE.webp"]{height:26px;}
  }

  /* Mentions l√©gales */
  .legal{background:#f7f9fc;color:var(--ink);padding:24px 16px;margin-top:clamp(40px,6vw,80px)}
  .legal__inner{max-width:var(--maxw);margin:0 auto;text-align:center}
  .legal__link{color:#0b61d8;text-decoration:underline;font-weight:800;cursor:pointer}
  .legal .sep{border:0;border-top:1px solid var(--border);margin:16px auto 0;max-width:var(--maxw)}
  #mentions-popup{display:none;position:fixed;left:50%;bottom:64px;transform:translateX(-50%);width:360px;max-width:95vw;background:#fff;color:var(--ink);border:1px solid var(--border);border-radius:14px;padding:18px 20px 14px;box-shadow:0 10px 36px rgba(2,6,23,.15);z-index:9999;font-size:13px;line-height:1.7}
  #close-mentions{position:absolute;top:6px;right:12px;background:none;border:0;color:var(--ink);font-size:20px;font-weight:800;cursor:pointer}

  /* === Overlay calcul === */
  body.no-scroll{overflow:hidden;}
  #calc-overlay{position:fixed;inset:0;background:rgba(2,6,23,.35);backdrop-filter:blur(2px);display:none;z-index:9998;align-items:center;justify-content:center;padding:20px;}
  #calc-overlay .panel{width:100%;max-width:360px;background:#fff;color:#111827;border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 36px rgba(2,6,23,.15);padding:18px;text-align:center;outline:none;}
  #calc-overlay .spinner{width:42px;height:42px;margin:6px auto 12px;border:4px solid #e5e7eb;border-top:4px solid var(--accent);border-radius:50%;animation:spin 1s linear infinite;}
  @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
  #calc-overlay .title{font-weight:800;margin:0 0 6px;}
  #calc-overlay .desc{color:#374151;font-size:14px;margin:0;}

  /* ============== MODE R√âSULTAT ============== */
  body.results-mode header.hero{height:var(--hero-h-desktop);min-height:var(--hero-min);padding-bottom:0;}
  @media (max-width:860px){ body.results-mode header.hero{ height: var(--hero-h-mobile); } }
  body.results-mode header.hero::before{opacity:1 !important;}
  body.results-mode .panel{margin-bottom:0;}
  body.results-mode main > *{display:none !important;}
  body.results-mode main > #recap, body.results-mode main > .legal{display:block !important;}
  body.results-mode main > .legal{margin-top:24px;}
  body.results-mode #recap{display:block !important;margin-top:12px;}

  /* ===== R√©sultats ‚Äì style 2025 ===== */
  .result-card{
    max-width: 860px; margin: 16px auto; padding: 18px;
    background:#fff; color:var(--ink); border:1px solid var(--border);
    border-radius:16px; box-shadow:0 6px 18px rgba(15,23,42,.06);
  }
  .result-card h2{ margin:0 0 20px; font-weight:900; font-size:clamp(20px,2.4vw,24px); }
  .result-grid{ display:grid; gap:12px; grid-template-columns:1fr; }
  @media(min-width:780px){ .result-grid{ grid-template-columns:repeat(2,1fr); } }

  .kpi{
    background:#fff; border:1px solid var(--border);
    border-radius:12px; padding:12px;
  }
  .kpi .label{ color:#64748b; font-size:13px; margin-bottom:4px; }
  .kpi .value{ font-weight:800; font-size:18px; color:var(--ink); }

  /* Mise en avant ‚Äúdimensionnement‚Äù avec liser√© gauche */
  .kpi--highlight{ position:relative; background:#fff; border-color:var(--border); }
  .kpi--highlight::before{
    content:""; position:absolute; left:-1px; top:-1px; bottom:-1px; width:4px;
    border-radius:12px 0 0 12px; background:var(--accent);
  }

  /* Banni√®re offre & pav√© financier */
  .financial-banner{
    margin:24px 0 0; padding:18px; text-align:center;
    background:#fffaf2; border:1px solid #fde68a; border-radius:12px; box-shadow:none;
  }
  .financial-card{
    margin-top:12px; padding:16px; background:#fff; border:1px solid var(--border);
    border-radius:14px; box-shadow:0 6px 18px rgba(15,23,42,.06);
  }
  .financial-title{ font-size:18px; font-weight:900; margin:0 0 10px; color:var(--ink); }
  .tokens{ display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 10px; }
  .token{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#f8fafc; font-weight:700; }
  .note{ color:#64748b; font-size:13px; line-height:1.5; }
  .note-alert{ margin-top:10px; padding:10px 12px; background:#fff8e1; border:1px dashed var(--accent); border-radius:10px; }

  /* Petits correctifs formulaires */
  .rect input{ min-width:0; }
  /* ----- Palier 2 : carte d'engagement ----- */
.lead-card{
  max-width: 860px; margin: 16px auto; padding: 16px;
  background:#fff; border:1px solid var(--border); border-radius:16px;
  box-shadow:0 8px 22px rgba(2,6,23,.06);
}
.lead-card__head{
  background:linear-gradient(180deg,#fff,#fff9ec);
  border:1px solid #fde68a; border-radius:12px; padding:14px 16px; margin-bottom:14px;
}
.lead-card h3{ margin:0 0 4px; font-size:18px; font-weight:900; color:var(--ink); }
.lead-card .subtitle{ color:#7c2d12; font-weight:800; }

.badges{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 12px; }
.badge-chip{
  display:inline-flex; align-items:center; gap:6px; padding:6px 10px;
  border-radius:999px; border:1px solid var(--border); background:#f8fafc; font-weight:700; font-size:13px;
}
.lead-grid{ display:grid; gap:10px; grid-template-columns:1fr; }
@media(min-width:680px){ .lead-grid{ grid-template-columns:1fr 1fr; } }

.input{ display:flex; align-items:center; gap:8px; border:1px solid var(--border);
  background:#fff; border-radius:10px; padding:10px 12px; }
.input input{ width:100%; border:0; outline:0; font:inherit; color:var(--ink); }

.lead-notes{ color:#64748b; font-size:13px; line-height:1.45; margin-top:6px; }
.lead-cta{
  margin-top:12px; display:flex; justify-content:center;
}
.lead-cta .cta{ width:auto; min-width:280px; padding:0 18px; }

.lead-alert{
  margin-top:10px; padding:10px 12px; background:#fff8e1; border:1px dashed #f59e0b; border-radius:10px;
  color:#7c2d12; font-size:13px;
}
.lead-foot{ margin-top:10px; color:#94a3b8; font-size:12px; text-align:center; }

</style>

</head>

<body>
<header class="hero">

     <!-- Logos certifications (haut-gauche) -->
    <div class="certifs" aria-label="Labels et certifications">
      <img class="certifs__img" src="https://raw.githubusercontent.com/BiofranceEnergies/biofrance-images/687b0f048a98e03f86e7852020887ff4f05eb913/icone%20RGE.webp" alt="Label RGE ‚Äì Reconnu Garant de l‚ÄôEnvironnement">
      <img class="certifs__img certifs__img--main" src="https://raw.githubusercontent.com/BiofranceEnergies/biofrance-images/687b0f048a98e03f86e7852020887ff4f05eb913/logo%20SSP.webp" alt="Solution Solaire Pro">
      <img class="certifs__img" src="https://raw.githubusercontent.com/BiofranceEnergies/biofrance-images/687b0f048a98e03f86e7852020887ff4f05eb913/icone%20qualipv.webp" alt="Certification QualiPV 2025">
    </div>
  <div class="hero__inner">
    <div>
      <h1 class="title">
        Co√ªt installation<br>panneaux solaires dans<br><em>l‚ÄôEure-et-Loir (28)</em>
      </h1>
      <p class="lead">Estimez gratuitement le co√ªt d‚Äôinstallation, la production et vos √©conomies en moins d‚Äôune minute.</p>
    </div>

   <div class="panel">
  <form onsubmit="return __handleSubmitEtape1(event)" novalidate>
    <div class="pill">Co√ªt de votre installation & √©conomies en direct</div>

    <div class="row">
      <label class="rect">
        <input
          id="codePostal"
          type="text"
          placeholder="Votre code postal (ex : 28000)"
          inputmode="numeric"
          maxlength="5"
          pattern="[0-9]{5}"
          autocomplete="postal-code"
          required
        >
      </label>

      <label class="rect">
        <input
          id="facture"
          type="text"
          placeholder="Votre facture √©lec / an (ex : 1 800 ‚Ç¨)"
          inputmode="decimal"
          autocomplete="off"
          required
        >
      </label>
    </div>

    <label class="option">
      <input
        id="conso"
        type="text"
        placeholder="Option pour un calcul plus pr√©cis ‚Äî vos kWh/an (facultatif)"
        inputmode="decimal"
        autocomplete="off"
      >
    </label>

    <button id="simuler" class="cta" type="submit">‚ö° Calculer mon co√ªt maintenant</button>
  </form>
</div>
</header>


<main>
    <!-- R√âSULTATS DE SIMULATION -->
  <div id="recap" style="display:none"></div>
  <div id="lockedSection" style="display:none"></div>

  <section class="steps-2025">
    <div class="steps-2025__inner">
      <h2 class="steps-2025__title">Un simulateur qui va √† l‚Äôessentiel</h2>
      <p class="steps-2025__subtitle">Un processus simple et transparent en 3 √©tapes</p>

      <div class="steps-2025__grid">
        <article class="steps-2025__item">
          <span class="steps-2025__num">01</span>
          <h3 class="steps-2025__heading">√âtude personnalis√©e</h3>
          <p class="steps-2025__text">Votre √©tude personnalis√©e selon votre consommation.</p>
        </article>
        <article class="steps-2025__item">
          <span class="steps-2025__num">02</span>
          <h3 class="steps-2025__heading">√âconomies estim√©es</h3>
          <p class="steps-2025__text">Vos √©conomies estim√©es d√®s la 1<sup>re</sup> ann√©e.</p>
        </article>
        <article class="steps-2025__item">
          <span class="steps-2025__num">03</span>
          <h3 class="steps-2025__heading">Co√ªt pr√©cis & financement</h3>
          <p class="steps-2025__text">Le co√ªt pr√©cis de l‚Äôinstallation et son financement.</p>
        </article>
      </div>

      <div class="steps-2025__note">
        <p>Rien de superflu. Juste les chiffres qui comptent.</p>
        <div class="steps-2025__check">
          <svg viewBox="0 0 24 24" width="60" height="60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="12" cy="12" r="11" fill="#22c55e"/>
            <path d="M7 12.5l3.2 3.2L17 9" fill="none" stroke="#ffffff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>

    <section class="why" aria-labelledby="why-title">
  <div class="why__inner">
    <header class="why__head">
      <h2 id="why-title" class="why__title">Pourquoi passer √† l‚Äô√©nergie solaire&nbsp;?</h2>
      <p class="why__subtitle">Les b√©n√©fices concrets d‚Äôune installation photovolta√Øque chez vous</p>
    </header>

    <div class="why__grid">
      <!-- Carte 1 -->
      <article class="why__card">
        <div class="why__top">
          <div class="why__icon" aria-hidden="true">
            <!-- ic√¥ne tendance ‚Üò -->
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M4 7h2.9l5.2 6.2 3.2-3.4H20v2h-3.7l-3.2 3.4L6.9 9H4z"/></svg>
          </div>
          <h3 class="why__heading">√âconomies importantes</h3>
        </div>
        <p class="why__text">Baissez durablement votre facture d‚Äô√©lectricit√© gr√¢ce √† l‚Äôautoconsommation.</p>
      </article>

      <!-- Carte 2 -->
      <article class="why__card">
        <div class="why__top">
          <div class="why__icon" aria-hidden="true">
            <!-- ic√¥ne feuille -->
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M12 3C6 3 3 9 3 13c0 4 3 8 9 8 6 0 9-4 9-8 0-6-3-10-9-10zm1.6 6.2c2.4 0 4.4 1.8 4.4 4.1 0 2.9-2.2 5.6-6 6.2-2.6.4-5.2-.9-5.2-3.3 0-3.6 3.8-7 6.8-7z"/></svg>
          </div>
          <h3 class="why__heading">√ânergie propre</h3>
        </div>
        <p class="why__text">Produisez localement une √©nergie renouvelable et r√©duisez votre empreinte carbone.</p>
      </article>

      <!-- Carte 3 -->
      <article class="why__card">
        <div class="why__top">
          <div class="why__icon" aria-hidden="true">
            <!-- ic√¥ne √©clair -->
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M13 3L4 14h6l-1 7 9-11h-6l1-7z"/></svg>
          </div>
          <h3 class="why__heading">Performance actuelle</h3>
        </div>
        <p class="why__text">Panneaux de derni√®re g√©n√©ration, rendement √©lev√© et suivi transparent de la production.</p>
      </article>

      <!-- Carte 4 -->
      <article class="why__card">
        <div class="why__top">
          <div class="why__icon" aria-hidden="true">
            <!-- ic√¥ne bouclier -->
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M12 2l8 3v6c0 5-3.5 9.7-8 11-4.5-1.3-8-6-8-11V5l8-3z"/></svg>
          </div>
          <h3 class="why__heading">Garantie et p√©rennit√©</h3>
        </div>
        <p class="why__text">Mat√©riel garanti, installation durable et service apr√®s-vente local.</p>
      </article>
    </div>
  </div>
</section>

    <!-- CHIFFRES CL√âS ‚Äì fond panneaux full black, style √©pur√© -->
    <section class="stats-bg" aria-labelledby="stats-title">
      <h2 id="stats-title" class="sr-only">Chiffres cl√©s</h2>
      <div class="stats-bg__inner">
        <div class="stat">
          <div class="stat__value">+300</div>
          <div class="stat__label">Installations en Centre-Val de Loire</div>
        </div>
        <div class="stat">
          <div class="stat__value">30 ans</div>
          <div class="stat__label">Garantie mat√©riel</div>
        </div>
        <div class="stat">
          <div class="stat__value">70%</div>
          <div class="stat__label">d‚Äô√©conomies moyennes</div>
        </div>
        <div class="stat">
          <div class="stat__value">98%</div>
          <div class="stat__label">Clients satisfaits</div>
        </div>
      </div>
    </section>
  </section>

 <!-- ================== AVIS CLIENTS ================== -->
<section class="testi" aria-labelledby="testi-title">
  <div class="testi__inner">
    <header class="testi__head">
      <h2 id="testi-title" class="testi__title">Ils ont utilis√© notre simulateur</h2>
      <p class="testi__meta" aria-label="Note moyenne">
        ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ &nbsp; <strong>4,7 / 5</strong> ‚Äî extraits d‚Äôavis clients r√©cents (12 derniers mois)
      </p>
    </header>

    <div class="testi__grid" style="grid-template-columns:repeat(auto-fit,minmax(280px,1fr));max-width:950px;margin:0 auto;">
      <!-- Avis 1 -->
      <article class="tcard" aria-label="Avis client">
        <div class="tcard__top">
          <div class="avatar" aria-hidden="true">HB</div>
          <div>
            <div class="tcard__name">Herv√© B.</div>
            <div class="tcard__loc">Chartres (28) ¬∑ 05/2025</div>
          </div>
        </div>
        <div class="stars" aria-label="Note 5 sur 5">
          <svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg>
        </div>
        <p class="tcard__text">‚ÄúEstimation rapide et claire. Les chiffres annonc√©s sont coh√©rents avec ma conso.‚Äù</p>
      </article>

      <!-- Avis 2 -->
      <article class="tcard" aria-label="Avis client">
        <div class="tcard__top">
          <div class="avatar" aria-hidden="true">CR</div>
          <div>
            <div class="tcard__name">Camille R.</div>
            <div class="tcard__loc">Dreux (28) ¬∑ 06/2025</div>
          </div>
        </div>
        <div class="stars" aria-label="Note 4 sur 5">
          <svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:#d1d5db)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg>
        </div>
        <p class="tcard__text">‚ÄúPr√©sentation simple et r√©sultats fiables. Permet de juger si le projet est coh√©rent.‚Äù</p>
      </article>

      <!-- Avis 3 -->
      <article class="tcard" aria-label="Avis client">
        <div class="tcard__top">
          <div class="avatar" aria-hidden="true">JM</div>
          <div>
            <div class="tcard__name">Julie M.</div>
            <div class="tcard__loc">Luc√© (28) ¬∑ 04/2025</div>
          </div>
        </div>
        <div class="stars" aria-label="Note 5 sur 5">
          <svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg><svg viewBox="0 0 24 24" fill="currentColor" style="color:var(--accent)">
            <path d="M12 17.3l-6.18 3.73 1.64-7.03L2 9.24l7.19-.62L12 2l2.81 6.62 7.19.62-5.46 4.76 1.64 7.03z"/>
          </svg>
        </div>
        <p class="tcard__text">‚ÄúLe co√ªt est affich√© noir sur blanc, avec une projection claire sur 15 ans.‚Äù</p>
      </article>
    </div>
  </div>
</section>
<section class="faq" aria-labelledby="faq-title">
  <div class="faq__inner">
    <header class="faq__head">
      <h2 id="faq-title" class="faq__title">Questions fr√©quentes</h2>
      <p class="faq__subtitle">Tout ce qu‚Äôil faut savoir avant de passer √† l‚Äô√©nergie solaire</p>
    </header>

    <div class="faq__list faq">
      <!-- Q1 -->
      <details>
        <summary>
          Comment est calcul√©e mon estimation ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Elle s‚Äôappuie sur votre consommation annuelle (ou facture), un prix du kWh indicatif, l‚Äôensoleillement local et
          un sc√©nario technique standard. Les r√©sultats restent des ordres de grandeur.
        </div>
      </details>

      <!-- Q2 -->
      <details>
        <summary>
          Combien de panneaux pour mon cas ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Cela d√©pend de votre conso, de l‚Äôespace disponible, de l‚Äôorientation/inclinaison et des ombres. Le simulateur propose une fourchette dimensionn√©e.
        </div>
      </details>

      <!-- Q3 -->
      <details>
        <summary>
          Quelles √©conomies puis-je esp√©rer ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Elles varient selon votre profil et votre taux d‚Äôautoconsommation. Nous affichons un ordre de grandeur la 1<sup>re</sup> ann√©e et une projection √† 15 ans, sans promesse fixe.
        </div>
      </details>

      <!-- Q4 -->
      <details>
        <summary>
          Revente d‚Äô√©lectricit√©&nbsp;: est-ce int√©ressant ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Aujourd‚Äôhui, l‚Äôautoconsommation reste le levier principal. La revente √† prix de march√© est faible&nbsp;(~centimes/kWh). Nous dimensionnons d‚Äôabord pour consommer sur place.
        </div>
      </details>

      <!-- Q5 -->
      <details>
        <summary>
          Quelles contraintes pour ma toiture ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Toiture saine et √©tanche, absence d‚Äôamiante, charge admissible OK. Orientation sud id√©ale, est/ouest acceptable. Les ombres proches sont √† √©viter.
        </div>
      </details>

      <!-- Q6 -->
      <details>
        <summary>
          Combien de temps dure l‚Äôinstallation ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          La pose standard prend 1 √† 2 jours. Les d√©marches (Enedis, Consuel, administratif) suivent un calendrier s√©par√©.
        </div>
      </details>

      <!-- Q7 -->
      <details>
        <summary>
          Garanties et entretien ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Garanties fabricant 25‚Äì30 ans selon les mod√®les (puissance d√©gressive). Peu d‚Äôentretien&nbsp;: contr√¥le visuel et rin√ßage ponctuel si d√©p√¥ts.
        </div>
      </details>

      <!-- Q8 -->
      <details>
        <summary>
          Aides financi√®res et financement ?
          <svg class="faq__chev" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </summary>
        <div class="faq__panel">
          Nous privil√©gions la transparence&nbsp;: co√ªt pos√© noir sur blanc, sans artifices. Des mensualit√©s sont possibles. Les aides √©voluent&nbsp;: nous pr√©cisons ce qui est √©ligible lors de l‚Äô√©tude.
        </div>
      </details>
    </div>
  </div>

  <!-- Mentions l√©gales -->
<div class="legal">
  <div class="legal__inner">
    <span id="mentions-legales-link" class="legal__link">Mentions l√©gales</span>
    <hr class="sep">
  </div>
</div>

<!-- Popup Mentions -->
<div id="mentions-popup" role="dialog" aria-modal="true" aria-labelledby="mentions-title">
  <button id="close-mentions" type="button" aria-label="Fermer">&times;</button>
  <strong id="mentions-title">Mentions l√©gales :</strong><br>
  Solution Solaire Pro, marque de Biofrance √ânergies<br>
  SIRET : 422 231 928 00025<br>
  Adresse : 4 rue du Pont Saint Jean, 27530 √âzy-sur-Eure<br>
  Contact : solutionsolairepro@gmail.com<br>
  H√©bergeur : GitHub Pages, 88 Colin P. Kelly Jr. Street, San Francisco CA 94107 USA<br>
  Donn√©es personnelles : Les informations saisies sont utilis√©es uniquement pour traiter votre demande. Aucun d√©marchage ni revente.<br>
  RGPD : Suppression possible sur simple demande par e-mail.
</div>

</section>

<script>
document.addEventListener('click', (e)=>{
  if(e.target.closest('summary')){
    const d = e.target.closest('details');
    if(!d) return;
    const group = d.parentElement;
    // Ferme les autres items du m√™me groupe
    group.querySelectorAll('details[open]').forEach(x => { if(x!==d) x.removeAttribute('open'); });
  }
});

  // Mentions l√©gales ‚Äì ouverture/fermeture
document.addEventListener("DOMContentLoaded", ()=>{
  const link=document.getElementById("mentions-legales-link");
  const popup=document.getElementById("mentions-popup");
  const close=document.getElementById("close-mentions");
  if(link && popup && close){
    link.addEventListener("click", e=>{e.preventDefault();popup.style.display="block";});
    close.addEventListener("click", e=>{e.preventDefault();popup.style.display="none";});
  }
});

</script>

<!-- === Overlay "Calcul en cours‚Ä¶" ‚Äî √âtape 1 === -->
<div id="calc-overlay" role="alertdialog" aria-modal="true" aria-labelledby="calc-title" aria-describedby="calc-desc">
  <div class="panel" tabindex="-1">
    <div class="spinner" aria-hidden="true"></div>
    <h3 id="calc-title" class="title">Calcul en cours‚Ä¶</h3>
    <p id="calc-desc" class="desc">Nous pr√©parons votre estimation.</p>
  </div>
</div>

<script>
  (function(){
    const overlay   = document.getElementById('calc-overlay');
    const btn       = document.getElementById('simuler');
    const inputCP   = document.getElementById('codePostal');
    const inputFact = document.getElementById('facture');

    function showCalcOverlay(msg){
      if (!overlay) return;
      if (msg) { const t = overlay.querySelector('#calc-title'); if (t) t.textContent = msg; }
      overlay.style.display = 'flex';
      document.body.classList.add('no-scroll');
      overlay.querySelector('.panel')?.focus();
      if (btn) { btn.disabled = true; btn.style.opacity = '0.7'; }
    }
    function hideCalcOverlay(){
      if (!overlay) return;
      overlay.style.display = 'none';
      document.body.classList.remove('no-scroll');
      if (btn) { btn.disabled = false; btn.style.opacity = '1'; }
    }
    function validateStep1(){
      const cp = (inputCP?.value || '').trim();
      const factureRaw = (inputFact?.value || '');
      const num = parseFloat(factureRaw.replace(/\s/g,'').replace(',', '.').replace(/[^0-9.]/g,''));
      const okCP = /^[0-9]{5}$/.test(cp);
      const okFact = Number.isFinite(num) && num > 0;
      if (!okCP)  { alert('Veuillez entrer un code postal valide (5 chiffres).'); return false; }
      if (!okFact){ alert("Veuillez indiquer une facture annuelle valide."); return false; }
      return true;
    }

    async function fetchScenarios(departement){
      try{
        const r = await fetch('https://script.google.com/macros/s/AKfycbwhlyD_FMMm2g9JIQAm2Se2xehUqIM2MzWMl1YGl_gP1DJKM_-jZFj_YStDMhWi-0F8XA/exec');
        const data = await r.json();
        return (data || [])
          .filter(row => String(row.Departement||'') === String(departement))
          .map(row => ({
            prixKwh: parseFloat(String(row.PrixKwh||'').replace(',', '.').replace(/[^0-9.]/g,'')),
            puissance: row.Puissance,
            prod: parseFloat(row.Prod),
            seuil: parseFloat(row.Seuil),
            panels: parseInt(row.Panels),
            prix: parseFloat(row.Prix),
            remiseChantier: parseFloat(String(row.RemiseChantier||'').replace(',', '.').replace(/[^0-9.]/g,'')),
            mensualite: parseFloat(row.Mensualite),
            taeg: parseFloat(row.Taeg),
            total: parseFloat(row.Total),
            dureeMois: parseInt(row.Mois)
          }));
      }catch(e){
        console.error('fetchScenarios error', e);
        alert("Impossible de charger les donn√©es, r√©essayez plus tard.");
        return [];
      }
    }

    window.__handleSubmitEtape1 = async function(ev){
      ev.preventDefault();
      showCalcOverlay('Calcul en cours‚Ä¶');

      if (!validateStep1()){
        hideCalcOverlay();
        return false;
      }

      const departement = (inputCP.value.trim()).substring(0,2);
      const scenarios = await fetchScenarios(departement);

      if (!scenarios.length){
        hideCalcOverlay();
        alert('Aucune donn√©e disponible pour ce d√©partement.');
        return false;
      }

      console.log('Sc√©narios charg√©s :', scenarios.length, scenarios);

      // --- Calculs ---
      const cp = inputCP.value.trim();
      const facture = parseFloat((inputFact.value || '')
        .replace(/\s/g,'').replace(',', '.').replace(/[^0-9.]/g,'')
      );

      const inputConso = document.getElementById('conso');
      let conso, prixKwh;
      if (inputConso && inputConso.value) {
        conso   = parseFloat((inputConso.value || '').replace(/\s/g,'').replace(',', '.').replace(/[^0-9.]/g,''));
        prixKwh = facture / conso;
      } else {
        prixKwh = scenarios[0].prixKwh;
        conso   = facture / prixKwh;
      }

      const minProd = Math.min(...scenarios.map(s => Number(s.prod) || 0));
      if (conso < minProd) {
        alert("Consommation trop faible : installation non conseill√©e.");
        hideCalcOverlay();
        return false;
      }
      let sc = scenarios.filter(s => (s.prod||0) <= conso).sort((a,b)=> (b.prod||0) - (a.prod||0))[0];
      if (!sc) sc = scenarios.sort((a,b)=> (b.prod||0) - (a.prod||0))[0];

      // --- Rendu ---
      const recap = document.getElementById('recap');
      if (!recap){
        console.warn('#recap manquant dans le HTML');
        hideCalcOverlay();
        return false;
      }
     // --- Calculs affich√©s (ajout√©s juste avant le rendu) ---
const autoconso = Math.min(Number(sc.prod||0), Number(conso||0));
const gainAn    = autoconso * (Number.isFinite(prixKwh) ? prixKwh : 0);
const gainMois  = gainAn / 12;
const prixBrut  = Number.isFinite(sc.prix) ? sc.prix : null;
const remise    = Number.isFinite(sc.remiseChantier) ? sc.remiseChantier : 0;
const prixNet   = prixBrut !== null ? Math.max(0, prixBrut - remise) : null;

// --- Rendu (NOUVEAU) ---
recap.innerHTML = `
<section class="result-card" role="region" aria-label="Votre estimation personnalis√©e">
  <h2>Votre estimation personnalis√©e</h2>

  <div class="result-grid">
    <div class="kpi">
      <div class="label">Code postal</div>
      <div class="value">${cp}</div>
    </div>

    <div class="kpi">
      <div class="label">Conso annuelle estim√©e</div>
      <div class="value">${Math.round(conso).toLocaleString('fr-FR')} kWh</div>
    </div>

    <div class="kpi">
      <div class="label">Prix du kWh utilis√©</div>
      <div class="value">${(Number.isFinite(prixKwh)?prixKwh:0).toFixed(3)} ‚Ç¨</div>
    </div>

    <div class="kpi">
      <div class="label">Facture annuelle</div>
      <div class="value">${(Number.isFinite(facture)?facture:0).toLocaleString('fr-FR')} ‚Ç¨</div>
    </div>

    <div class="kpi kpi--highlight" style="grid-column:1/-1">
      <div class="label">Dimensionnement propos√©</div>
      <div class="value">
        ${sc.puissance} ‚Äî ${sc.panels} panneaux (500 W) ‚Ä¢ ${(sc.prod||0).toLocaleString('fr-FR')} kWh/an
      </div>
    </div>

    <div class="kpi" style="grid-column:1/-1">
      <div class="label">% de votre consommation couverte</div>
      <div class="value">
        <strong>${((autoconso / conso) * 100).toFixed(1)} %</strong> de votre consommation est couverte par votre production
      </div>
      <p class="note">
        Votre production est valoris√©e √† 100 % gr√¢ce √† la batterie virtuelle, m√™me si elle ne couvre pas 100 % de votre consommation.
        <em> Hypoth√®se standard : exposition Sud/Sud-Est, pente de toit 35¬∞.</em>
      </p>
    </div>

    <div class="kpi">
      <div class="label">Gain 1 ≥·µâ ann√©e (ordre de grandeur)</div>
      <div class="value">${Math.round(gainAn).toLocaleString('fr-FR')} ‚Ç¨ / an</div>
    </div>

    <div class="kpi">
      <div class="label">√âconomie moyenne mensuelle</div>
      <div class="value">${Math.round(gainMois).toLocaleString('fr-FR')} ‚Ç¨ / mois</div>
    </div>
  </div>

  ${ (Number.isFinite(sc.remiseChantier) && sc.remiseChantier > 0) ? `
    <div class="financial-banner">
      <div style="font-weight:800">Offre sp√©ciale ¬´ Groupage chantiers ¬ª</div>
      <div style="font-weight:900; font-size:20px;">
        ${Math.round(sc.remiseChantier).toLocaleString('fr-FR')} ‚Ç¨ de remise imm√©diate
      </div>
      <p class="note">(d√©duite du prix TTC indiqu√© ci-dessous) ‚Ä¢ Valable jusqu‚Äôau 31 octobre 2025</p>
    </div>
  ` : `` }

  <div class="financial-card">
    <h3 class="financial-title">Co√ªt et financement</h3>

    ${ Number.isFinite(sc.prix) ? `
      <p>
        <strong>Installation ${sc.puissance}</strong> :
        <span class="token">${Math.round(sc.prix).toLocaleString('fr-FR')} ‚Ç¨ TTC</span>
        <span class="note">(prix indicatif hors options)</span>
      </p>
    ` : `` }

    ${ Number.isFinite(sc.mensualite) ? `
      <p class="note" style="font-weight:700">Option financement <span class="note">(facultatif)</span></p>
      <div class="tokens">
        <span class="token">${sc.mensualite.toLocaleString('fr-FR')} ‚Ç¨ / mois</span>
        ${ Number.isFinite(sc.dureeMois) ? `<span class="token">Dur√©e : ${sc.dureeMois} mois</span>` : `` }
        ${ Number.isFinite(sc.taeg) ? `<span class="token">TAEG fixe : ${sc.taeg}%</span>` : `` }
      </div>

      ${ Number.isFinite(sc.total) ? `
        <p><strong>Prix total</strong> :
          <span class="token">${Number(sc.total).toLocaleString('fr-FR',{minimumFractionDigits:2,maximumFractionDigits:2})} ‚Ç¨</span>
        </p>
      ` : `` }

      <p class="note">Financement propos√© par notre partenaire, sous r√©serve d‚Äôacceptation.</p>
      <div class="note note-alert">‚ö†Ô∏è Un cr√©dit vous engage et doit √™tre rembours√©. V√©rifiez vos capacit√©s de remboursement avant de vous engager.</div>
      <p class="note">Estimation indicative. Une visite technique est n√©cessaire pour un devis ferme.</p>
    ` : `` }
  </div>
</section>
`;

// -- Palier 2 : Carte d'engagement -------------------------------------------------
const locked = document.getElementById('lockedSection');
if (locked){
  const remiseTxt = Number.isFinite(sc.remiseChantier)
    ? Math.round(sc.remiseChantier).toLocaleString('fr-FR')
    : '800';

  locked.innerHTML = `
    <section class="lead-card" aria-label="√âtape suivante">
      <div class="lead-card__head">
        <div style="text-align:center; font-weight:800; color:#334155;">
          Vous avez vu vos panneaux et votre production‚Ä¶
        </div>
        <h3 class="subtitle" style="text-align:center;">Et si on allait plus loin&nbsp;?</h3>
        <p class="lead-notes" style="text-align:center; margin:6px 0 0;">
          D√©couvrez le co√ªt pr√©cis de votre installation, vos √©conomies et votre mensualit√© fixe.<br>
          Profitez de <strong>${remiseTxt} ‚Ç¨</strong> de remise imm√©diate <span class="note">(jusqu‚Äôau 31/10/2025)</span>.
        </p>
      </div>

      <div class="badges">
        <span class="badge-chip">üîí Donn√©es prot√©g√©es</span>
        <span class="badge-chip">üñ•Ô∏è √âtude affich√©e imm√©diatement √† l‚Äô√©cran</span>
      </div>

      <div class="lead-grid">
        <label class="input">
          <span style="color:#94a3b8;font-weight:700">Email</span>
          <input id="leadEmail" type="email" placeholder="Votre email (facultatif)">
        </label>
        <label class="input">
          <span style="color:#94a3b8;font-weight:700">T√©l√©phone</span>
          <input id="leadPhone" type="tel" inputmode="tel" autocomplete="tel"
                 placeholder="06 12 34 56 78 (obligatoire)">
        </label>
      </div>

      <div class="lead-notes">Un SMS de confirmation vous sera envoy√©. Libre √† vous d‚Äô√©changer ensuite.</div>

      <label class="lead-notes" style="display:flex;align-items:center;gap:8px;margin-top:8px">
        <input id="leadSmsOnly" type="checkbox">
        Je consens √† √™tre contact√© par SMS uniquement.
      </label>

      <div class="lead-notes" style="display:flex;align-items:flex-start;gap:8px;margin-top:6px">
        <span>‚úÖ</span>
        <span>Votre projet s‚Äôautofinance gr√¢ce √† vos √©conomies. V√©rifiez-le par vous-m√™me&nbsp;!</span>
      </div>

      <div class="lead-cta">
        <button id="leadSubmit" class="cta" type="button">üìä Voir mon √©tude compl√®te et mes √©conomies</button>
      </div>

      <div class="lead-alert">‚ö†Ô∏è Un cr√©dit vous engage et doit √™tre rembours√©. V√©rifiez vos capacit√©s de remboursement avant de vous engager.</div>
      <div class="lead-foot">Vos donn√©es ne seront jamais revendues ni utilis√©es √† d‚Äôautres fins.</div>
    </section>
  `;
  locked.style.display = 'block';

  // (Optionnel) micro-validation t√©l√©phone FR + feedback simple
  const telInput = document.getElementById('leadPhone');
  const btnLead  = document.getElementById('leadSubmit');
  btnLead?.addEventListener('click', () => {
    const tel = (telInput?.value || '').replace(/\D/g,'');
    const ok = /^0[1-9]\d{8}$/.test(tel); // FR basique
    if (!ok){
      alert('Merci de saisir un num√©ro de t√©l√©phone mobile valide (format FR).');
      telInput?.focus();
      return;
    }
    // Ici : envoi vers ton endpoint / webhook si tu veux (√† d√©finir plus tard).
    alert('Parfait. Votre √©tude compl√®te va √™tre affich√©e (simulation √©tape suivante).');
  });
}



   

recap.style.display = 'block';
document.body.classList.add('results-mode');
recap.scrollIntoView({ behavior: 'smooth', block: 'start' });


      hideCalcOverlay();
      return false;
    };
  })();
</script>


</body>
</html>


  
